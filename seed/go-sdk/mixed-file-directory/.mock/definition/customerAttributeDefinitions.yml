imports:
  root: __package__.yml
service:
  auth: false
  base-path: ''
  endpoints:
    list:
      path: /v2/customers/custom-attribute-definitions
      method: GET
      auth: true
      docs: >-
        Lists the customer-related [custom attribute
        definitions](entity:CustomAttributeDefinition) that belong to a Square
        seller account.


        When all response pages are retrieved, the results include all custom
        attribute definitions

        that are visible to the requesting application, including those that are
        created by other

        applications and set to `VISIBILITY_READ_ONLY` or
        `VISIBILITY_READ_WRITE_VALUES`. Note that

        seller-defined custom attributes (also known as custom fields) are
        always set to `VISIBILITY_READ_WRITE_VALUES`.
      pagination:
        cursor: $request.cursor
        next_cursor: $response.cursor
        results: $response.custom_attribute_definitions
      display-name: ListCustomerCustomAttributeDefinitions
      request:
        name: CustomerAttributeDefinitionsListRequest
        query-parameters:
          limit:
            type: optional<integer>
            docs: >-
              The maximum number of results to return in a single paged
              response. This limit is advisory.

              The response might contain more or fewer results. The minimum
              value is 1 and the maximum value is 100.

              The default value is 20. For more information, see
              [Pagination](https://developer.squareup.com/docs/build-basics/common-api-patterns/pagination).
          cursor:
            type: optional<string>
            docs: >-
              The cursor returned in the paged response from the previous call
              to this endpoint.

              Provide this cursor to retrieve the next page of results for your
              original request.

              For more information, see
              [Pagination](https://developer.squareup.com/docs/build-basics/common-api-patterns/pagination).
      response:
        docs: Success
        type: root.ListCustomerCustomAttributeDefinitionsResponse
      examples:
        - response:
            body:
              custom_attribute_definitions:
                - key: key
                  schema:
                    key: value
                  name: name
                  description: description
                  visibility: VISIBILITY_DO_NOT_USE
                  version: 1
                  updated_at: updated_at
                  created_at: created_at
              cursor: cursor
              errors:
                - category: API_ERROR
                  code: INTERNAL_SERVER_ERROR
                  detail: detail
                  field: field
    create:
      path: /v2/customers/custom-attribute-definitions
      method: POST
      auth: true
      docs: >-
        Creates a customer-related [custom attribute
        definition](entity:CustomAttributeDefinition) for a Square seller
        account.

        Use this endpoint to define a custom attribute that can be associated
        with customer profiles.


        A custom attribute definition specifies the `key`, `visibility`,
        `schema`, and other properties

        for a custom attribute. After the definition is created, you can call

        [UpsertCustomerCustomAttribute](api-endpoint:CustomerCustomAttributes-UpsertCustomerCustomAttribute)
        or

        [BulkUpsertCustomerCustomAttributes](api-endpoint:CustomerCustomAttributes-BulkUpsertCustomerCustomAttributes)

        to set the custom attribute for customer profiles in the seller's
        Customer Directory.


        Sellers can view all custom attributes in exported customer data,
        including those set to

        `VISIBILITY_HIDDEN`.
      display-name: CreateCustomerCustomAttributeDefinition
      request:
        name: CreateCustomerCustomAttributeDefinitionRequest
        body:
          properties:
            custom_attribute_definition:
              type: root.CustomAttributeDefinition
              docs: >-
                The custom attribute definition to create. Note the following:

                - With the exception of the `Selection` data type, the `schema`
                is specified as a simple URL to the JSON schema

                definition hosted on the Square CDN. For more information,
                including supported values and constraints, see

                [Specifying the
                schema](https://developer.squareup.com/docs/customer-custom-attributes-api/custom-attribute-definitions#specify-schema).

                - If provided, `name` must be unique (case-sensitive) across all
                visible customer-related custom attribute definitions for the
                seller.

                - All custom attributes are visible in exported customer data,
                including those set to `VISIBILITY_HIDDEN`.
            idempotency_key:
              type: optional<string>
              docs: >-
                A unique identifier for this request, used to ensure
                idempotency. For more information,

                see
                [Idempotency](https://developer.squareup.com/docs/build-basics/common-api-patterns/idempotency).
              validation:
                maxLength: 45
      response:
        docs: Success
        type: root.CreateCustomerCustomAttributeDefinitionResponse
      examples:
        - request:
            custom_attribute_definition: {}
          response:
            body:
              custom_attribute_definition:
                key: key
                schema:
                  key: value
                name: name
                description: description
                visibility: VISIBILITY_DO_NOT_USE
                version: 1
                updated_at: updated_at
                created_at: created_at
              errors:
                - category: API_ERROR
                  code: INTERNAL_SERVER_ERROR
                  detail: detail
                  field: field
    get:
      path: /v2/customers/custom-attribute-definitions/{key}
      method: GET
      auth: true
      docs: >-
        Retrieves a customer-related [custom attribute
        definition](entity:CustomAttributeDefinition) from a Square seller
        account.


        To retrieve a custom attribute definition created by another
        application, the `visibility`

        setting must be `VISIBILITY_READ_ONLY` or
        `VISIBILITY_READ_WRITE_VALUES`. Note that seller-defined custom
        attributes

        (also known as custom fields) are always set to
        `VISIBILITY_READ_WRITE_VALUES`.
      path-parameters:
        key:
          type: string
          docs: >-
            The key of the custom attribute definition to retrieve. If the
            requesting application

            is not the definition owner, you must use the qualified key.
      display-name: RetrieveCustomerCustomAttributeDefinition
      request:
        name: CustomerAttributeDefinitionsGetRequest
        query-parameters:
          version:
            type: optional<integer>
            docs: >-
              The current version of the custom attribute definition, which is
              used for strongly consistent

              reads to guarantee that you receive the most up-to-date data. When
              included in the request,

              Square returns the specified version or a higher version if one
              exists. If the specified version

              is higher than the current version, Square returns a `BAD_REQUEST`
              error.
      response:
        docs: Success
        type: root.GetCustomerCustomAttributeDefinitionResponse
      examples:
        - path-parameters:
            key: key
          response:
            body:
              custom_attribute_definition:
                key: key
                schema:
                  key: value
                name: name
                description: description
                visibility: VISIBILITY_DO_NOT_USE
                version: 1
                updated_at: updated_at
                created_at: created_at
              errors:
                - category: API_ERROR
                  code: INTERNAL_SERVER_ERROR
                  detail: detail
                  field: field
    update:
      path: /v2/customers/custom-attribute-definitions/{key}
      method: PUT
      auth: true
      docs: >-
        Updates a customer-related [custom attribute
        definition](entity:CustomAttributeDefinition) for a Square seller
        account.


        Use this endpoint to update the following fields: `name`, `description`,
        `visibility`, or the

        `schema` for a `Selection` data type.


        Only the definition owner can update a custom attribute definition. Note
        that sellers can view

        all custom attributes in exported customer data, including those set to
        `VISIBILITY_HIDDEN`.
      path-parameters:
        key:
          type: string
          docs: The key of the custom attribute definition to update.
      display-name: UpdateCustomerCustomAttributeDefinition
      request:
        name: UpdateCustomerCustomAttributeDefinitionRequest
        body:
          properties:
            custom_attribute_definition:
              type: root.CustomAttributeDefinition
              docs: >-
                The custom attribute definition that contains the fields to
                update. This endpoint

                supports sparse updates, so only new or changed fields need to
                be included in the request.

                Only the following fields can be updated:


                - `name`

                - `description`

                - `visibility`

                - `schema` for a `Selection` data type. Only changes to the
                named options or the maximum number of allowed

                selections are supported.


                For more information, see

                [Updatable definition
                fields](https://developer.squareup.com/docs/customer-custom-attributes-api/custom-attribute-definitions#updatable-definition-fields).


                To enable [optimistic
                concurrency](https://developer.squareup.com/docs/build-basics/common-api-patterns/optimistic-concurrency) 

                control, include the optional `version` field and specify the
                current version of the custom attribute definition.
            idempotency_key:
              type: optional<string>
              docs: >-
                A unique identifier for this request, used to ensure
                idempotency. For more information,

                see
                [Idempotency](https://developer.squareup.com/docs/build-basics/common-api-patterns/idempotency).
              validation:
                maxLength: 45
      response:
        docs: Success
        type: root.UpdateCustomerCustomAttributeDefinitionResponse
      examples:
        - path-parameters:
            key: key
          request:
            custom_attribute_definition:
              description: Update the description as desired.
              visibility: VISIBILITY_READ_ONLY
          response:
            body:
              custom_attribute_definition:
                key: key
                schema:
                  key: value
                name: name
                description: description
                visibility: VISIBILITY_DO_NOT_USE
                version: 1
                updated_at: updated_at
                created_at: created_at
              errors:
                - category: API_ERROR
                  code: INTERNAL_SERVER_ERROR
                  detail: detail
                  field: field
    delete:
      path: /v2/customers/custom-attribute-definitions/{key}
      method: DELETE
      auth: true
      docs: >-
        Deletes a customer-related [custom attribute
        definition](entity:CustomAttributeDefinition) from a Square seller
        account.


        Deleting a custom attribute definition also deletes the corresponding
        custom attribute from

        all customer profiles in the seller's Customer Directory.


        Only the definition owner can delete a custom attribute definition.
      path-parameters:
        key:
          type: string
          docs: The key of the custom attribute definition to delete.
      display-name: DeleteCustomerCustomAttributeDefinition
      response:
        docs: Success
        type: root.DeleteCustomerCustomAttributeDefinitionResponse
      examples:
        - path-parameters:
            key: key
          response:
            body:
              errors:
                - category: API_ERROR
                  code: INTERNAL_SERVER_ERROR
                  detail: detail
                  field: field
  source:
    openapi: openapi/openapi.yaml
